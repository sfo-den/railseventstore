# This file is generated by .circleci/config.rb, do not edit it manually!
# Edit .circleci/config.rb and run ruby .circleci/config.rb

version: '2.1'
jobs:
  check_config:
    docker:
    - image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run:
        name: Verify .circleci/config.yml is generated by running ruby .circleci/config.rb
        command: WAS="$(md5sum .circleci/config.yml)" && ruby .circleci/config.rb
          && test "$WAS" == "$(md5sum .circleci/config.yml)"
  mutate_aggregate_root_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd aggregate_root && make install mutate
  mutate_bounded_context_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd bounded_context && make install mutate
  mutate_ruby_event_store_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd ruby_event_store && make install mutate
  mutate_ruby_event_store_browser_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd ruby_event_store-browser && make install mutate
  mutate_ruby_event_store_rom_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd ruby_event_store-rom && make install mutate
  mutate_rails_event_store_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd rails_event_store && make install mutate
  mutate_rails_event_store_active_record_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd rails_event_store_active_record && make install mutate
  mutate_rails_event_store_active_record_legacy_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd rails_event_store_active_record-legacy && make install mutate
  mutate_rails_event_store_rspec_2_6:
    docker:
    - environment:
        MUTANT_JOBS: 4
      image: circleci/ruby:2.6.0-node-browsers
    steps:
    - checkout
    - run: cd rails_event_store-rspec && make install mutate
  test_aggregate_root_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd aggregate_root && make install test
  test_bounded_context_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd bounded_context && make install test
  test_ruby_event_store_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd ruby_event_store && make install test
  test_ruby_event_store_browser_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd ruby_event_store-browser && make install test
  test_ruby_event_store_rom_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd ruby_event_store-rom && make install test
  test_rails_event_store_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd rails_event_store && make install test
  test_rails_event_store_active_record_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd rails_event_store_active_record && make install test
  test_rails_event_store_active_record_legacy_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd rails_event_store_active_record-legacy && make install test
  test_rails_event_store_rspec_2_6:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.6.0
    steps:
    - checkout
    - run: cd rails_event_store-rspec && make install test
  test_aggregate_root_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd aggregate_root && make install test
  test_bounded_context_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd bounded_context && make install test
  test_ruby_event_store_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd ruby_event_store && make install test
  test_ruby_event_store_browser_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd ruby_event_store-browser && make install test
  test_ruby_event_store_rom_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd ruby_event_store-rom && make install test
  test_rails_event_store_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd rails_event_store && make install test
  test_rails_event_store_active_record_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd rails_event_store_active_record && make install test
  test_rails_event_store_active_record_legacy_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd rails_event_store_active_record-legacy && make install test
  test_rails_event_store_rspec_2_3:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.3.8
    steps:
    - checkout
    - run: cd rails_event_store-rspec && make install test
  test_aggregate_root_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd aggregate_root && make install test
  test_bounded_context_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd bounded_context && make install test
  test_ruby_event_store_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd ruby_event_store && make install test
  test_ruby_event_store_browser_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd ruby_event_store-browser && make install test
  test_ruby_event_store_rom_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd ruby_event_store-rom && make install test
  test_rails_event_store_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd rails_event_store && make install test
  test_rails_event_store_active_record_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd rails_event_store_active_record && make install test
  test_rails_event_store_active_record_legacy_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd rails_event_store_active_record-legacy && make install test
  test_rails_event_store_rspec_2_4:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.4.5
    steps:
    - checkout
    - run: cd rails_event_store-rspec && make install test
  test_aggregate_root_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd aggregate_root && make install test
  test_bounded_context_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd bounded_context && make install test
  test_ruby_event_store_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd ruby_event_store && make install test
  test_ruby_event_store_browser_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd ruby_event_store-browser && make install test
  test_ruby_event_store_rom_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd ruby_event_store-rom && make install test
  test_rails_event_store_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd rails_event_store && make install test
  test_rails_event_store_active_record_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd rails_event_store_active_record && make install test
  test_rails_event_store_active_record_legacy_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd rails_event_store_active_record-legacy && make install test
  test_rails_event_store_rspec_2_5:
    docker:
    - environment:
        DATABASE_URL: sqlite:db.sqlite3
      image: pawelpacana/res:2.5.3
    steps:
    - checkout
    - run: cd rails_event_store-rspec && make install test
workflows:
  version: 2
  Check configuration:
    jobs:
    - check_config
  Current Ruby:
    jobs:
    - test_aggregate_root_2_6
    - mutate_aggregate_root_2_6:
        requires:
        - test_aggregate_root_2_6
    - test_bounded_context_2_6
    - mutate_bounded_context_2_6:
        requires:
        - test_bounded_context_2_6
    - test_ruby_event_store_2_6
    - mutate_ruby_event_store_2_6:
        requires:
        - test_ruby_event_store_2_6
    - test_ruby_event_store_browser_2_6
    - mutate_ruby_event_store_browser_2_6:
        requires:
        - test_ruby_event_store_browser_2_6
    - test_ruby_event_store_rom_2_6
    - mutate_ruby_event_store_rom_2_6:
        requires:
        - test_ruby_event_store_rom_2_6
    - test_rails_event_store_2_6
    - mutate_rails_event_store_2_6:
        requires:
        - test_rails_event_store_2_6
    - test_rails_event_store_active_record_2_6
    - mutate_rails_event_store_active_record_2_6:
        requires:
        - test_rails_event_store_active_record_2_6
    - test_rails_event_store_active_record_legacy_2_6
    - mutate_rails_event_store_active_record_legacy_2_6:
        requires:
        - test_rails_event_store_active_record_legacy_2_6
    - test_rails_event_store_rspec_2_6
    - mutate_rails_event_store_rspec_2_6:
        requires:
        - test_rails_event_store_rspec_2_6
  Ruby 2.5:
    jobs:
    - test_aggregate_root_2_5
    - test_bounded_context_2_5
    - test_ruby_event_store_2_5
    - test_ruby_event_store_browser_2_5
    - test_ruby_event_store_rom_2_5
    - test_rails_event_store_2_5
    - test_rails_event_store_active_record_2_5
    - test_rails_event_store_active_record_legacy_2_5
    - test_rails_event_store_rspec_2_5
  Ruby 2.4:
    jobs:
    - test_aggregate_root_2_4
    - test_bounded_context_2_4
    - test_ruby_event_store_2_4
    - test_ruby_event_store_browser_2_4
    - test_ruby_event_store_rom_2_4
    - test_rails_event_store_2_4
    - test_rails_event_store_active_record_2_4
    - test_rails_event_store_active_record_legacy_2_4
    - test_rails_event_store_rspec_2_4
  Ruby 2.3:
    jobs:
    - test_aggregate_root_2_3
    - test_bounded_context_2_3
    - test_ruby_event_store_2_3
    - test_ruby_event_store_browser_2_3
    - test_ruby_event_store_rom_2_3
    - test_rails_event_store_2_3
    - test_rails_event_store_active_record_2_3
    - test_rails_event_store_active_record_legacy_2_3
    - test_rails_event_store_rspec_2_3
